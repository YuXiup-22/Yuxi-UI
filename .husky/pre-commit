#!/usr/bin/env sh
echo "ğŸ§¹ æ­£åœ¨è¿è¡Œ ESLint & Prettier æ£€æŸ¥..."
npx lint-staged

# æ£€æŸ¥ lint-staged æ˜¯å¦æœ‰ä»»ä½•ä¿®æ”¹ï¼ˆå·¥ä½œåŒºæ˜¯å¦æœ‰æœªæš‚å­˜çš„æ”¹åŠ¨ï¼‰
if ! git diff --quiet --exit-code; then
  echo ""
  echo "âš ï¸  æš‚å­˜å·¥ä½œåŒº ESLint & Prettier æ£€æŸ¥æœ‰ä¿®æ”¹ä»£ç "
  echo "    è¯·é˜…è¯»ä¿®æ”¹éƒ¨åˆ†(git diff),å†³å®šæ˜¯å¦è¿›è¡Œæ“ä½œ:"
  echo "    - 'git add .' æäº¤æ–°çš„commit"
  echo "    - 'git commit --amend' åˆå¹¶åˆ°å½“å‰commit"
  echo "    - 'git stash' æš‚æ—¶éšè—"
  echo ""
  # è¿™é‡Œä¸é˜»æ­¢æäº¤ï¼Œè€Œæ˜¯è®©ç”¨æˆ·è‡ªå·±å¤„ç†ã€‚
  # å¦‚æœä½ å¸Œæœ›å¼ºåˆ¶ç”¨æˆ·å¤„ç†è¿™äº›ä¿®æ”¹æ‰èƒ½ç»§ç»­ï¼Œå¯ä»¥åŠ ä¸Š exit 1
  # exit 1
fi

echo "âœ… æš‚å­˜å·¥ä½œåŒº ESLint & Prettier æ£€æŸ¥é€šè¿‡."